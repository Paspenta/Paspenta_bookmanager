{% extends "base.html" %}

{% set title = "index" %}

{% block content %}
    <div class="container">
        <form action="{{ url_for(manager.index) }}" method="get" class="row">
            {% for label in ["Title", "AuthorName", "PublisherName", "LocationName"] %}
                <div class="col-auto">
                    <label for="{{ label }}" class="form-label">{{ label }}</label>
                    <input name="{{ label }}" id="{{ label }}" class="form-control">
                </div>
            {% endfor %}
            <button type="submit" class="btn bth-primary">検索</button>
        </form>
    </div>
    {% if books %}
        <table class="table w-100">
            <thed>
                <tr>
                    <th class="w-auto" scope="col">タイトル</th>
                    <th class="w-auto" scope="col">著者</th>
                    <th class="w-auto" scope="col">巻数</th>
                    <th class="w-auto" scope="col">出版社</th>
                    <th class="w-auto" scope="col">出版日</th>
                    <th class="w-auto" scope="col">所有</th>
                    <th class="w-auto" scope="col">#</th>
                </tr>
            </thed>
            <tbody>
            {% for book in books %}
                <tr>
                    <td class="w-auto">{{ book["title"] }}</td>
                    <td class="w-auto">{{ book["author"] }}</td>
                    <td class="w-auto">{{ book["volume"] }}</td>
                    <td class="w-auto">{{ book["publisher"] }}</td>
                    <td class="w-auto">{{ book["have_site"] }}</td>
                    <td class="w-auto">{{ book["publication_date"] }}</td>
                    <td class="w-auto"><a href="{{ url_for(manager.edit, id=book.id) }}">編集</a></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div class="container w-100 fixed-bottom">
            <div class="row mx-auto">
                <a class="btn btn-primary col-auto me-3" href="{{ url_for(manager.index, **minus_parms) }}">prev</a>
                <a class="btn btn-primary col-auto me-3" href="{{ url_for(manager.index, **plus_parms) }}">next</a>
            </div>
        </div>
    {% else %}
        <h1> Book not found </h1>
    {% endif%}
{% endblock %}

{% block script %}
    <script>
    function search() {
        let book_title = document.getElementById("book_title");
        let url = "{{ url_for('manager.index')}}?book_title=" + encodeURIComponent(book_title);
        window.location.href = url;
    }
    </script>
{% endblock %}