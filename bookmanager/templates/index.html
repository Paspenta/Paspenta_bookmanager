{% extends "base.html" %}

{% set title = "index" %}

{% block header %}
    <input type="text" id="book_title" class="form-controll">
    <button onclick="search()">検索</button>
    <a href="{{ url_for(manager.advanced) }}">詳細検索</a>
{% endblock %}

{% block content %}
    {% if books %}
        <table class="table w-100">
            <thed>
                <tr>
                    <th class="w-auto" scope="col">タイトル</th>
                    <th class="w-auto" scope="col">著者</th>
                    <th class="w-auto" scope="col">巻数</th>
                    <th class="w-auto" scope="col">出版社</th>
                    <th class="w-auto" scope="col">出版日</th>
                    <th class="w-auto" scope="col">所有</th>
                    <th class="w-auto" scope="col">#</th>
                </tr>
            </thed>
            <tbody>
            {% for book in books %}
                <tr>
                    <td class="w-auto">{{ book["title"] }}</td>
                    <td class="w-auto">{{ book["author"] }}</td>
                    <td class="w-auto">{{ book["volume"] }}</td>
                    <td class="w-auto">{{ book["publisher"] }}</td>
                    <td class="w-auto">{{ book["have_site"] }}</td>
                    <td class="w-auto">{{ book["publication_date"] }}</td>
                    <td class="w-auto"><a href="{{ url_for(manager.edit, id=book.id) }}">編集</a></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div class="container w-100 fixed-bottom">
            <div class="row mx-auto">
                <a class="btn btn-primary col-auto me-3" href="{{ url_for(manager.index, **minus_parms) }}">prev</a>
                <a class="btn btn-primary col-auto me-3" href="{{ url_for(manager.index, **plus_parms) }}">next</a>
            </div>
        </div>
    {% else %}
        <h1> Book not found </h1>
    {% endif%}
{% endblock %}

{% block script %}
    <script>
    function search() {
        let book_title = document.getElementById("book_title");
        let url = "{{ url_for('manager.index')}}?book_title=" + encodeURIComponent(book_title);
        window.location.href = url;
    }
    </script>
{% endblock %}